{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"RetrievAI","text":"<p>RAG-based document retrieval and chat application powered by LangChain.</p>"},{"location":"#overview","title":"Overview","text":"<p>RetrievAI enables you to upload documents and chat with them using AI-powered retrieval augmented generation (RAG). The system processes your documents, creates vector embeddings, and provides accurate, context-aware responses.</p> <p>Iframe not loading? Watch the video here</p>"},{"location":"#features","title":"Features","text":"<ul> <li>Document Upload \u2014 Support for PDF, DOCX, TXT, and Markdown files</li> <li>Intelligent Chunking \u2014 Documents are split into semantic chunks for optimal retrieval</li> <li>Vector Search \u2014 ChromaDB-powered similarity search for relevant context</li> <li>Chat Interface \u2014 Conversational AI with source citations</li> </ul>"},{"location":"#quick-start","title":"Quick Start","text":"<pre><code># Clone and configure\ngit clone https://github.com/your-username/retrievAI.git\ncd retrievAI\ncp .env.example .env\n\n# Start services\ndocker compose up -d\n</code></pre> <p>Access the application:</p> <ul> <li>Frontend: http://localhost:3000</li> <li>API: http://localhost:8000</li> <li>API Docs: http://localhost:8000/api/docs</li> </ul>"},{"location":"#tech-stack","title":"Tech Stack","text":"Component Technology Backend FastAPI, LangChain, Python 3.11+ Frontend React 18, TypeScript, Vite Database PostgreSQL 16 Vector Store ChromaDB Cache Redis Infrastructure Docker Compose, Nginx"},{"location":"DEPLOYMENT/","title":"RetrievAI Deployment Guide","text":"<p>Complete guide for deploying RetrievAI v0.2.0 to your OpenStack VM using GitHub Actions.</p>"},{"location":"DEPLOYMENT/#table-of-contents","title":"Table of Contents","text":"<ul> <li>Prerequisites</li> <li>Setup Instructions</li> <li>GitHub Configuration</li> <li>Deployment</li> <li>Post-Deployment</li> <li>Troubleshooting</li> </ul>"},{"location":"DEPLOYMENT/#prerequisites","title":"Prerequisites","text":""},{"location":"DEPLOYMENT/#on-your-vm","title":"On Your VM","text":"<ol> <li>Operating System: Ubuntu 20.04+</li> <li>Software: Docker, Docker Compose, Git, NGINX    <pre><code>sudo apt update &amp;&amp; sudo apt upgrade -y\nsudo apt install git nginx -y\ncurl -fsSL https://get.docker.com -o get-docker.sh &amp;&amp; sudo sh get-docker.sh\nsudo usermod -aG docker $USER\n</code></pre></li> <li>Firewall: Allow ports 80, 443, 22.</li> <li>ChromaDB Data: Ensure your Chroma collection is present on the VM.</li> <li>Default expected path: <code>/srv/retrievai-data/chromadb</code></li> <li>If different, set <code>CHROMA_DB_PATH</code> in your <code>.bashrc</code> or update the docker-compose file.</li> </ol>"},{"location":"DEPLOYMENT/#on-your-local-machine","title":"On Your Local Machine","text":"<ol> <li>GitHub repository access.</li> <li>OpenAI API key.</li> </ol>"},{"location":"DEPLOYMENT/#setup-instructions","title":"Setup Instructions","text":""},{"location":"DEPLOYMENT/#step-1-prepare-vm-directories","title":"Step 1: Prepare VM Directories","text":"<pre><code># Create deployment directory\nsudo mkdir -p /srv/retrievai\nsudo chown $USER:$USER /srv/retrievai\n\n# Create data directory (if not already existing)\nsudo mkdir -p /srv/retrievai-data/chromadb\nsudo chown -R $USER:$USER /srv/retrievai-data\n</code></pre>"},{"location":"DEPLOYMENT/#step-2-configure-nginx","title":"Step 2: Configure NGINX","text":"<p>The deployment workflow will copy the <code>nginx.conf</code> to the VM and substitute <code>${DOMAIN_NAME}</code> with your configured GitHub Variable.</p> <pre><code># 1. Link the new configuration\nsudo ln -sf /srv/retrievai/nginx.conf /etc/nginx/sites-available/retrievai\nsudo ln -sf /etc/nginx/sites-available/retrievai /etc/nginx/sites-enabled/retrievai\n\n# 2. Remove/Disable old configs (e.g., your existing 'streamlit' config)\nsudo rm /etc/nginx/sites-enabled/default\nsudo rm /etc/nginx/sites-enabled/streamlit  # If this is your old config name\n\n# 3. Test and Reload\nsudo nginx -t\nsudo systemctl reload nginx\n</code></pre> <p>Note: The new <code>nginx.conf</code> is configured to use the domain defined in your GitHub Variables (<code>DOMAIN_NAME</code>).</p>"},{"location":"DEPLOYMENT/#github-configuration","title":"GitHub Configuration","text":""},{"location":"DEPLOYMENT/#secrets-settings-secrets-and-variables-actions-secrets","title":"Secrets (Settings \u2192 Secrets and variables \u2192 Actions \u2192 Secrets)","text":"<p>Required secrets for the deployment workflow:</p> Secret Name Description <code>SSH_HOST</code> IP/IPv6 of your VM (e.g., <code>2001:700:2:8200::2232</code>) <code>SSH_USER</code> VM username (e.g., <code>ubuntu</code>) <code>SSH_PROXY_HOST</code> Jump host hostname (e.g., <code>login.uio.no</code>) <code>SSH_PROXY_USER</code> Jump host username (UiO username) <code>SSH_KEY</code> Private SSH key (used for target via jump host) <code>OPENAI_API_KEY</code> Your OpenAI API Key <code>POSTGRES_PASSWORD</code> Secure password for the database <code>SECRET_KEY</code> Secure random string for the app"},{"location":"DEPLOYMENT/#variables-settings-secrets-and-variables-actions-variables","title":"Variables (Settings \u2192 Secrets and variables \u2192 Actions \u2192 Variables)","text":"Variable Name Value <code>DEPLOY_PATH</code> <code>/srv/retrievai</code> <code>DOMAIN_NAME</code> <code>yourdomain.com</code>"},{"location":"DEPLOYMENT/#deployment","title":"Deployment","text":""},{"location":"DEPLOYMENT/#automated-deployment","title":"Automated Deployment","text":"<ol> <li>Go to Actions tab in GitHub.</li> <li>Select Deploy to OpenStack VM.</li> <li>Click Run workflow.</li> <li>Select <code>production</code> environment.</li> </ol> <p>The workflow will: - SSH into the VM. - Pull the latest code. - Inject secrets into a <code>.env</code> file. - Update NGINX config. - Deploy with Docker Compose. - Run database migrations.</p>"},{"location":"DEPLOYMENT/#manual-deployment-fallback","title":"Manual Deployment (Fallback)","text":"<pre><code>ssh user@vm\ncd /srv/retrievai\ngit pull\n# Manually create .env file with secrets\ndocker compose -f docker-compose.prod.yml up -d --build\n</code></pre>"},{"location":"DEPLOYMENT/#post-deployment","title":"Post-Deployment","text":""},{"location":"DEPLOYMENT/#verify-health","title":"Verify Health","text":"<ul> <li>Frontend: <code>https://yourdomain.com</code></li> <li>API: <code>https://yourdomain.com/api/health</code></li> <li>Docs: <code>https://yourdomain.com/docs</code></li> </ul>"},{"location":"DEPLOYMENT/#data-migration","title":"Data Migration","text":"<p>If you have existing data to migrate:</p> <pre><code>### Option A: Migration Scripts (Recommended if starting fresh)\n\n```bash\n# Copy migration data to VM\nscp -r .retrievai/ your-user@your-vm:/srv/retrievai-data/\n\n# Run migrations\ncd /srv/retrievai\ndocker compose -f docker-compose.prod.yml run --rm \\\n  -v /srv/retrievai-data/.retrievai:/app/.retrievai \\\n  backend python /app/migration_scripts/migrate_users.py\n\ndocker compose -f docker-compose.prod.yml run --rm \\\n  -v /srv/retrievai-data/.retrievai:/app/.retrievai \\\n  backend python /app/migration_scripts/migrate_settings.py\n\ndocker compose -f docker-compose.prod.yml run --rm \\\n  -v /srv/retrievai-data/.retrievai:/app/.retrievai \\\n  backend python /app/migration_scripts/populate_documents.py\n</code></pre>"},{"location":"DEPLOYMENT/#option-b-database-dump-restore-if-you-have-a-full-local-db","title":"Option B: Database Dump &amp; Restore (If you have a full local DB)","text":"<p>If you have a fully populated local database you want to clone:</p> <ol> <li> <p>Dump Local Database:    <pre><code># Run this on your LOCAL machine\n# We exclude owner/privileges to avoid conflicts with production credentials\ndocker compose exec postgres pg_dump -U retrievai -d retrievai --no-owner --no-acl &gt; retrievai_dump.sql\n</code></pre></p> </li> <li> <p>Transfer Dump to VM:    <pre><code>scp retrievai_dump.sql your-user@your-vm:/srv/retrievai/\n</code></pre></p> </li> <li> <p>Restore on VM:    <pre><code># SSH into VM\nssh your-user@your-vm\ncd /srv/retrievai\n\n# Stop backend to prevent writes during restore\ndocker compose -f docker-compose.prod.yml stop backend worker\n\n# Drop existing schema (optional, but safer for clean restore)\ndocker compose -f docker-compose.prod.yml exec postgres psql -U retrievai -d retrievai -c \"DROP SCHEMA public CASCADE; CREATE SCHEMA public;\"\n\n# Restore the dump\n# Note: We use -d retrievai to connect to the correct DB\ncat retrievai_dump.sql | docker compose -f docker-compose.prod.yml exec -T postgres psql -U retrievai -d retrievai\n\n# Restart services\ndocker compose -f docker-compose.prod.yml start backend worker\n</code></pre></p> </li> </ol>"},{"location":"DEPLOYMENT/#troubleshooting","title":"Troubleshooting","text":"<ul> <li>ChromaDB Error: Check if the volume mount path in <code>docker-compose.prod.yml</code> matches your VM path.</li> <li>Database Error: Check <code>POSTGRES_PASSWORD</code> in secrets.</li> <li>NGINX Error: Run <code>sudo nginx -t</code> to validate config.</li> </ul>"},{"location":"TESTING/","title":"Local End-to-End Testing Guide","text":"<p>This guide explains how to run the complete RetrievAI application locally for testing, using an isolated test environment that doesn't interfere with production data.</p>"},{"location":"TESTING/#overview","title":"Overview","text":"<p>The test environment provides: - Isolated database: Separate PostgreSQL instance on port 5433 - Isolated services: Redis (6380), ChromaDB (8002), Backend (8080), Frontend (3001) - Clean state: Easy to reset and start fresh - No production impact: Completely independent from production data and services</p>"},{"location":"TESTING/#quick-start","title":"Quick Start","text":""},{"location":"TESTING/#1-set-up-your-environment","title":"1. Set up your environment","text":"<p>Copy the test environment file and add your OpenAI API key:</p> <pre><code>cp .env.test .env.test.local\n# Edit .env.test.local and add your OPENAI_API_KEY\n</code></pre> <p>Or set it directly in your shell:</p> <pre><code>export OPENAI_API_KEY=sk-your-key-here\n</code></pre>"},{"location":"TESTING/#2-start-the-test-environment","title":"2. Start the test environment","text":"<pre><code>./scripts/test-env.sh start\n</code></pre> <p>This will: - Start all services (Postgres, Redis, ChromaDB, Backend, Worker, Frontend) - Wait for health checks to pass - Display URLs for accessing the services</p>"},{"location":"TESTING/#3-run-database-migrations","title":"3. Run database migrations","text":"<p>On first run, initialize the database schema:</p> <pre><code>./scripts/test-env.sh migrate\n</code></pre>"},{"location":"TESTING/#4-seed-test-users","title":"4. Seed test users","text":"<p>Create test user accounts:</p> <pre><code>./scripts/test-env.sh seed\n</code></pre> <p>This creates two test accounts: - Regular User: <code>test@example.com</code> / <code>testpassword123</code> - Admin User: <code>admin@example.com</code> / <code>adminpassword123</code></p>"},{"location":"TESTING/#5-access-the-application","title":"5. Access the application","text":"<p>Open your browser to: - Frontend: http://localhost:3001 - Backend API: http://localhost:8080 - API Docs: http://localhost:8080/docs</p> <p>Login with one of the test accounts created above.</p>"},{"location":"TESTING/#test-accounts","title":"Test Accounts","text":"<p>After running <code>./scripts/test-env.sh seed</code>, you can log in with:</p> Account Type Email Password Regular User <code>test@example.com</code> <code>testpassword123</code> Admin User <code>admin@example.com</code> <code>adminpassword123</code>"},{"location":"TESTING/#test-environment-commands","title":"Test Environment Commands","text":"<p>The <code>./scripts/test-env.sh</code> script provides several commands:</p>"},{"location":"TESTING/#startstop-commands","title":"Start/Stop Commands","text":"<pre><code># Start all services\n./scripts/test-env.sh start\n\n# Stop all services\n./scripts/test-env.sh stop\n\n# Restart all services\n./scripts/test-env.sh restart\n\n# Reset environment (deletes ALL test data)\n./scripts/test-env.sh reset\n</code></pre>"},{"location":"TESTING/#debugging-commands","title":"Debugging Commands","text":"<pre><code># View all logs (follow mode)\n./scripts/test-env.sh logs\n\n# View specific service logs\n./scripts/test-env.sh logs backend-test\n./scripts/test-env.sh logs worker-test\n./scripts/test-env.sh logs frontend-test\n\n# Check service status\n./scripts/test-env.sh status\n</code></pre>"},{"location":"TESTING/#database-commands","title":"Database Commands","text":"<pre><code># Run migrations\n./scripts/test-env.sh migrate\n\n# Seed test users\n./scripts/test-env.sh seed\n\n# Clear test users\n./scripts/test-env.sh clear\n\n# Open PostgreSQL shell\n./scripts/test-env.sh db\n\n# From the PostgreSQL shell, you can run queries:\n# \\dt                    - List tables\n# \\d users               - Describe users table\n# SELECT * FROM users;   - Query users\n</code></pre>"},{"location":"TESTING/#development-commands","title":"Development Commands","text":"<pre><code># Open a shell in the backend container\n./scripts/test-env.sh shell\n\n# Rebuild all containers (after dependency changes)\n./scripts/test-env.sh build\n</code></pre>"},{"location":"TESTING/#service-ports","title":"Service Ports","text":"<p>The test environment uses different ports to avoid conflicts:</p> Service Test Port Development Port Production Frontend 3001 3000 3000 Backend API 8080 8000 8000 PostgreSQL 5433 5432 internal Redis 6380 6379 internal ChromaDB 8002 8001 internal"},{"location":"TESTING/#testing-workflows","title":"Testing Workflows","text":""},{"location":"TESTING/#full-end-to-end-test","title":"Full End-to-End Test","text":"<ol> <li> <p>Start fresh:    <pre><code>./scripts/test-env.sh reset\n./scripts/test-env.sh start\n./scripts/test-env.sh migrate\n./scripts/test-env.sh seed\n</code></pre></p> </li> <li> <p>Access frontend at http://localhost:3001</p> </li> <li> <p>Log in with test credentials:</p> </li> <li>Email: <code>test@example.com</code></li> <li> <p>Password: <code>testpassword123</code></p> </li> <li> <p>Test the complete user flow:</p> </li> <li>Upload documents</li> <li>Create a collection</li> <li>Perform searches/queries</li> <li> <p>Check background job processing</p> </li> <li> <p>Monitor logs:    <pre><code># In a separate terminal\n./scripts/test-env.sh logs\n</code></pre></p> </li> </ol>"},{"location":"TESTING/#testing-backend-changes","title":"Testing Backend Changes","text":"<ol> <li> <p>Make code changes in <code>backend/app/</code></p> </li> <li> <p>Changes auto-reload (hot reload enabled):    <pre><code># Watch the logs to see reload\n./scripts/test-env.sh logs backend-test\n</code></pre></p> </li> <li> <p>Test API at http://localhost:8080/docs</p> </li> </ol>"},{"location":"TESTING/#testing-frontend-changes","title":"Testing Frontend Changes","text":"<ol> <li> <p>Make code changes in <code>frontend/src/</code></p> </li> <li> <p>Changes auto-reload in the container</p> </li> <li> <p>View at http://localhost:3001</p> </li> </ol>"},{"location":"TESTING/#testing-database-migrations","title":"Testing Database Migrations","text":"<ol> <li> <p>Create a new migration:    <pre><code>./scripts/test-env.sh shell\n# Inside container:\nuv run alembic revision --autogenerate -m \"description\"\nexit\n</code></pre></p> </li> <li> <p>Apply migration:    <pre><code>./scripts/test-env.sh migrate\n</code></pre></p> </li> <li> <p>Verify in database:    <pre><code>./scripts/test-env.sh db\n# Inside psql:\n\\dt\n</code></pre></p> </li> </ol>"},{"location":"TESTING/#testing-worker-jobs","title":"Testing Worker Jobs","text":"<ol> <li> <p>Start environment and watch worker logs:    <pre><code>./scripts/test-env.sh start\n./scripts/test-env.sh logs worker-test\n</code></pre></p> </li> <li> <p>Trigger a job (e.g., upload a document via frontend)</p> </li> <li> <p>Monitor job execution in worker logs</p> </li> </ol>"},{"location":"TESTING/#connecting-external-tools","title":"Connecting External Tools","text":"<p>You can connect external tools to the test environment:</p>"},{"location":"TESTING/#database-gui-tableplus-dbeaver-etc","title":"Database GUI (TablePlus, DBeaver, etc.)","text":"<pre><code>Host: localhost\nPort: 5433\nDatabase: retrievai_test\nUsername: retrievai_test\nPassword: test_password\n</code></pre>"},{"location":"TESTING/#redis-cli","title":"Redis CLI","text":"<pre><code>redis-cli -p 6380\n</code></pre>"},{"location":"TESTING/#direct-api-testing","title":"Direct API Testing","text":"<pre><code># Health check\ncurl http://localhost:8080/health\n\n# Login\ncurl -X POST http://localhost:8080/api/auth/login \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\"email\":\"user@example.com\",\"password\":\"password\"}'\n</code></pre>"},{"location":"TESTING/#troubleshooting","title":"Troubleshooting","text":""},{"location":"TESTING/#services-wont-start","title":"Services won't start","text":"<pre><code># Check for port conflicts\nlsof -i :3001,8080,5433,6380,8002\n\n# Check Docker resources\ndocker system df\n\n# View detailed logs\n./scripts/test-env.sh logs\n</code></pre>"},{"location":"TESTING/#database-connection-errors","title":"Database connection errors","text":"<pre><code># Wait for database to be ready\n./scripts/test-env.sh status\n\n# Check database health\ndocker-compose -f docker-compose.test.yml -p retrievai-test \\\n  exec postgres-test pg_isready -U retrievai_test\n</code></pre>"},{"location":"TESTING/#migration-issues","title":"Migration issues","text":"<pre><code># Check current migration status\n./scripts/test-env.sh shell\nuv run alembic current\nuv run alembic history\n\n# Reset database and re-run migrations\n./scripts/test-env.sh reset\n./scripts/test-env.sh start\n./scripts/test-env.sh migrate\n</code></pre>"},{"location":"TESTING/#clean-slate","title":"Clean slate","text":"<p>When in doubt, reset everything:</p> <pre><code>./scripts/test-env.sh reset\ndocker system prune -f\n./scripts/test-env.sh build\n./scripts/test-env.sh start\n./scripts/test-env.sh migrate\n</code></pre>"},{"location":"TESTING/#architecture","title":"Architecture","text":"<p>The test environment uses Docker Compose to orchestrate:</p> <pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  Browser (localhost:3001)                   \u2502\n\u2502  \u251c\u2500\u2500 Frontend Container                     \u2502\n\u2502  \u2502   \u2514\u2500\u2500 React + Vite                       \u2502\n\u2502  \u2514\u2500\u2500 API Requests \u2192 localhost:8080          \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                    \u2193\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  Backend Container (localhost:8080)         \u2502\n\u2502  \u251c\u2500\u2500 FastAPI                                \u2502\n\u2502  \u251c\u2500\u2500 SQLAlchemy (async)                     \u2502\n\u2502  \u2514\u2500\u2500 ChromaDB client                        \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n          \u2193              \u2193              \u2193\n    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n    \u2502 Postgres\u2502    \u2502  Redis  \u2502    \u2502 ChromaDB\u2502\n    \u2502  :5433  \u2502    \u2502  :6380  \u2502    \u2502  :8002  \u2502\n    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n          \u2191\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  Worker Container                           \u2502\n\u2502  \u251c\u2500\u2500 ARQ background worker                  \u2502\n\u2502  \u2514\u2500\u2500 Processes async jobs                   \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre> <p>All data is stored in Docker volumes: - <code>postgres_test_data</code> - PostgreSQL data - <code>redis_test_data</code> - Redis data - <code>chroma_test_data</code> - ChromaDB vectors - <code>upload_test_data</code> - Uploaded files</p>"},{"location":"TESTING/#cicd-integration","title":"CI/CD Integration","text":"<p>You can use this test environment in CI/CD pipelines:</p> <pre><code># In your CI script\nexport OPENAI_API_KEY=$CI_OPENAI_API_KEY\n./scripts/test-env.sh start\n./scripts/test-env.sh migrate\n\n# Run your tests\npytest backend/tests/\n\n# Cleanup\n./scripts/test-env.sh stop\n</code></pre>"},{"location":"TESTING/#differences-from-development-environment","title":"Differences from Development Environment","text":"Aspect Development (<code>docker-compose.yml</code>) Test (<code>docker-compose.test.yml</code>) Ports Standard (3000, 8000, etc.) Offset (+1 or +80) Database <code>retrievai</code> <code>retrievai_test</code> Data Persistent development data Easily resettable test data Purpose Daily development Isolated testing <p>Both environments can run simultaneously without conflicts.</p>"},{"location":"TESTING/#best-practices","title":"Best Practices","text":"<ol> <li> <p>Reset between test sessions: Start each major test session with a clean slate    <pre><code>./scripts/test-env.sh reset &amp;&amp; ./scripts/test-env.sh start\n</code></pre></p> </li> <li> <p>Monitor logs: Keep logs open during testing to catch issues early    <pre><code>./scripts/test-env.sh logs\n</code></pre></p> </li> <li> <p>Test migrations: Always test migrations in the test environment before production    <pre><code>./scripts/test-env.sh reset\n./scripts/test-env.sh start\n./scripts/test-env.sh migrate\n</code></pre></p> </li> <li> <p>Use realistic data: Upload realistic documents and create realistic test scenarios</p> </li> <li> <p>Test the full stack: Don't just test the API - test through the frontend UI</p> </li> </ol>"},{"location":"TESTING/#next-steps","title":"Next Steps","text":"<ul> <li>Consider adding automated test scripts</li> <li>Set up Playwright or Cypress for E2E UI testing</li> <li>Create test data seed scripts</li> <li>Add performance testing with realistic data volumes</li> </ul>"},{"location":"api/","title":"API Reference","text":""},{"location":"api/#interactive-documentation","title":"Interactive Documentation","text":"<p>Full interactive API documentation is available at:</p> <ul> <li>Swagger UI: /api/docs</li> <li>ReDoc: /api/redoc</li> </ul>"},{"location":"api/#base-url","title":"Base URL","text":"<pre><code>http://localhost:8000/api/v1\n</code></pre>"},{"location":"api/#authentication","title":"Authentication","text":"<p>Most endpoints require authentication via JWT bearer token.</p> <pre><code>curl -H \"Authorization: Bearer &lt;token&gt;\" \\\n  http://localhost:8000/api/v1/documents\n</code></pre>"},{"location":"api/#obtain-token","title":"Obtain Token","text":"<pre><code>POST /api/v1/auth/login\nContent-Type: application/json\n\n{\n  \"email\": \"user@example.com\",\n  \"password\": \"password\"\n}\n</code></pre>"},{"location":"api/#endpoints-overview","title":"Endpoints Overview","text":""},{"location":"api/#authentication_1","title":"Authentication","text":"Method Endpoint Description POST <code>/auth/register</code> Create account POST <code>/auth/login</code> Obtain tokens POST <code>/auth/refresh</code> Refresh access token POST <code>/auth/logout</code> Invalidate tokens"},{"location":"api/#documents","title":"Documents","text":"Method Endpoint Description GET <code>/documents</code> List documents GET <code>/documents/{id}</code> Get document details DELETE <code>/documents/{id}</code> Delete document"},{"location":"api/#upload","title":"Upload","text":"Method Endpoint Description POST <code>/upload</code> Upload document GET <code>/upload/{id}/status</code> Check processing status"},{"location":"api/#chat","title":"Chat","text":"Method Endpoint Description POST <code>/chat</code> Send message GET <code>/chat/conversations</code> List conversations GET <code>/chat/conversations/{id}</code> Get conversation DELETE <code>/chat/conversations/{id}</code> Delete conversation"},{"location":"api/#error-responses","title":"Error Responses","text":"<p>Errors follow a consistent format:</p> <pre><code>{\n  \"detail\": \"Error message here\"\n}\n</code></pre> <p>Common status codes:</p> Code Meaning 400 Bad request 401 Unauthorized 403 Forbidden 404 Not found 422 Validation error 500 Server error"},{"location":"development/architecture/","title":"Architecture","text":""},{"location":"development/architecture/#system-overview","title":"System Overview","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502   Frontend  \u2502\u2500\u2500\u2500\u2500\u25b6\u2502   Nginx     \u2502\u2500\u2500\u2500\u2500\u25b6\u2502   Backend   \u2502\n\u2502   (React)   \u2502     \u2502  (Reverse   \u2502     \u2502  (FastAPI)  \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518     \u2502   Proxy)    \u2502     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518            \u2502\n                                               \u25bc\n                    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n                    \u2502  PostgreSQL \u2502   ChromaDB  \u2502    Redis    \u2502\n                    \u2502  (Metadata) \u2502  (Vectors)  \u2502  (Queue)    \u2502\n                    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                                                       \u2502\n                                                       \u25bc\n                                               \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n                                               \u2502 ARQ Worker  \u2502\n                                               \u2502  (Tasks)    \u2502\n                                               \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"development/architecture/#components","title":"Components","text":""},{"location":"development/architecture/#frontend","title":"Frontend","text":"<p>React SPA built with Vite and TypeScript. Handles:</p> <ul> <li>User authentication</li> <li>Document upload interface</li> <li>Chat interface</li> <li>Document management</li> </ul>"},{"location":"development/architecture/#backend","title":"Backend","text":"<p>FastAPI application providing REST API endpoints. Core responsibilities:</p> <ul> <li>Authentication and authorization</li> <li>Document processing orchestration</li> <li>Chat/RAG endpoints</li> <li>Admin functionality</li> </ul>"},{"location":"development/architecture/#background-task-processing-arq-redis","title":"Background Task Processing (ARQ + Redis)","text":"<p>Document processing is handled asynchronously using ARQ, a fast job queue built on Redis. This architecture allows the API to remain responsive while heavy tasks run in the background.</p> <p>How it works:</p> <ol> <li>Job Enqueueing \u2014 When a document is uploaded, FastAPI enqueues a processing job to Redis via ARQ</li> <li>Job Queue \u2014 Redis stores the job queue, maintaining task order and state</li> <li>Worker Processing \u2014 A separate ARQ worker process pulls jobs from Redis and executes them</li> <li>Status Updates \u2014 The worker updates job status in Redis/PostgreSQL; the frontend polls for progress</li> </ol> <p>Why ARQ?</p> <ul> <li>Native async/await support (matches FastAPI's async model)</li> <li>Lightweight compared to Celery</li> <li>Built specifically for Redis</li> <li>Simple API with robust retry and timeout handling</li> </ul> <p>Task Examples:</p> <ul> <li>Document text extraction</li> <li>Chunk generation and embedding</li> <li>Vector store indexing</li> <li>Batch operations</li> </ul> <p>The worker runs as a separate container/process (<code>arq app.workers.tasks.WorkerSettings</code>), allowing horizontal scaling independent of the API.</p>"},{"location":"development/architecture/#data-stores","title":"Data Stores","text":"Store Purpose PostgreSQL User accounts, document metadata, chat history ChromaDB Vector embeddings for similarity search Redis ARQ job queue, task state, caching"},{"location":"development/architecture/#rag-pipeline","title":"RAG Pipeline","text":"<ol> <li>Query \u2014 User submits a question</li> <li>Embed \u2014 Question is converted to vector embedding</li> <li>Retrieve \u2014 Similar chunks are found via ChromaDB</li> <li>Augment \u2014 Retrieved chunks are added to prompt context</li> <li>Generate \u2014 LLM generates response using context</li> <li>Cite \u2014 Response includes source chunk references</li> </ol>"},{"location":"development/architecture/#authentication","title":"Authentication","text":"<p>JWT-based authentication with:</p> <ul> <li>Access tokens (short-lived)</li> <li>Refresh tokens (long-lived)</li> <li>Secure HTTP-only cookies</li> </ul>"},{"location":"development/local-setup/","title":"Local Development Setup","text":""},{"location":"development/local-setup/#prerequisites","title":"Prerequisites","text":"<ul> <li>Python 3.11+</li> <li>Node.js 18+</li> <li>Docker and Docker Compose</li> </ul>"},{"location":"development/local-setup/#backend-development","title":"Backend Development","text":""},{"location":"development/local-setup/#using-docker-recommended","title":"Using Docker (Recommended)","text":"<p>The test compose file provides hot-reloading:</p> <pre><code>docker compose -f docker-compose.test.yml up -d\n</code></pre> <ul> <li>Backend: http://localhost:8080</li> <li>Frontend: http://localhost:3001</li> </ul>"},{"location":"development/local-setup/#native-setup","title":"Native Setup","text":"<pre><code>cd backend\n\n# Install dependencies\npip install uv\nuv sync\n\n# Run migrations\nuv run alembic upgrade head\n\n# Start server\nuv run uvicorn app.main:app --reload\n</code></pre>"},{"location":"development/local-setup/#frontend-development","title":"Frontend Development","text":"<pre><code>cd frontend\n\n# Install dependencies\nnpm install\n\n# Start dev server\nnpm run dev\n</code></pre>"},{"location":"development/local-setup/#running-tests","title":"Running Tests","text":"<p>See the Testing Guide for comprehensive testing instructions.</p>"},{"location":"development/local-setup/#code-structure","title":"Code Structure","text":"<pre><code>retrievAI/\n\u251c\u2500\u2500 backend/\n\u2502   \u251c\u2500\u2500 app/\n\u2502   \u2502   \u251c\u2500\u2500 api/v1/      # API routes\n\u2502   \u2502   \u251c\u2500\u2500 db/          # Database models\n\u2502   \u2502   \u251c\u2500\u2500 services/    # Business logic\n\u2502   \u2502   \u2514\u2500\u2500 workers/     # Background tasks\n\u2502   \u2514\u2500\u2500 alembic/         # Migrations\n\u251c\u2500\u2500 frontend/\n\u2502   \u2514\u2500\u2500 src/\n\u2502       \u251c\u2500\u2500 components/  # React components\n\u2502       \u251c\u2500\u2500 pages/       # Page components\n\u2502       \u2514\u2500\u2500 services/    # API clients\n\u2514\u2500\u2500 docs/                # Documentation\n</code></pre>"},{"location":"getting-started/configuration/","title":"Configuration","text":""},{"location":"getting-started/configuration/#environment-variables","title":"Environment Variables","text":"<p>RetrievAI is configured via environment variables. Copy <code>.env.example</code> to <code>.env</code> and customize as needed.</p>"},{"location":"getting-started/configuration/#required","title":"Required","text":"Variable Description <code>OPENAI_API_KEY</code> Your OpenAI API key (get one here) <code>SECRET_KEY</code> JWT signing key (min 32 characters) <p>Generate a secure secret key:</p> <pre><code>python -c \"import secrets; print(secrets.token_urlsafe(32))\"\n</code></pre>"},{"location":"getting-started/configuration/#database","title":"Database","text":"Variable Default Description <code>POSTGRES_USER</code> <code>retrievai</code> PostgreSQL username <code>POSTGRES_PASSWORD</code> \u2014 PostgreSQL password <code>POSTGRES_DB</code> <code>retrievai</code> PostgreSQL database name"},{"location":"getting-started/configuration/#application","title":"Application","text":"Variable Default Description <code>ENVIRONMENT</code> <code>development</code> Environment name (<code>development</code>, <code>test</code>, <code>production</code>) <code>DEBUG</code> <code>true</code> Enable debug mode"},{"location":"getting-started/configuration/#production-configuration","title":"Production Configuration","text":"<p>For production deployments, ensure:</p> <ol> <li><code>DEBUG=false</code></li> <li><code>ENVIRONMENT=production</code></li> <li><code>SECRET_KEY</code> is a strong, unique value</li> <li><code>POSTGRES_PASSWORD</code> is secure</li> </ol> <p>See Deployment Guide for full production setup.</p>"},{"location":"getting-started/installation/","title":"Installation","text":""},{"location":"getting-started/installation/#prerequisites","title":"Prerequisites","text":"<ul> <li>Docker and Docker Compose</li> <li>OpenAI API key</li> </ul>"},{"location":"getting-started/installation/#setup","title":"Setup","text":""},{"location":"getting-started/installation/#1-clone-the-repository","title":"1. Clone the Repository","text":"<pre><code>git clone https://github.com/your-username/retrievAI.git\ncd retrievAI\n</code></pre>"},{"location":"getting-started/installation/#2-configure-environment","title":"2. Configure Environment","text":"<pre><code>cp .env.example .env\n</code></pre> <p>Edit <code>.env</code> and set your OpenAI API key:</p> <pre><code>OPENAI_API_KEY=sk-your-api-key-here\n</code></pre>"},{"location":"getting-started/installation/#3-start-services","title":"3. Start Services","text":"<pre><code>docker compose up -d\n</code></pre> <p>This starts all services:</p> <ul> <li>PostgreSQL database</li> <li>Redis cache</li> <li>ChromaDB vector store</li> <li>FastAPI backend</li> <li>ARQ worker</li> <li>React frontend</li> </ul>"},{"location":"getting-started/installation/#4-verify-installation","title":"4. Verify Installation","text":"<p>Check service health:</p> <pre><code>docker compose ps\n</code></pre> <p>All services should show as \"healthy\" or \"running\".</p> <p>Access the application at http://localhost:3000.</p>"},{"location":"guide/chat/","title":"Chat Interface","text":""},{"location":"guide/chat/#overview","title":"Overview","text":"<p>The chat interface allows you to ask questions about your uploaded documents. RetrievAI uses RAG (Retrieval Augmented Generation) to find relevant context and generate accurate responses.</p>"},{"location":"guide/chat/#using-chat","title":"Using Chat","text":"<ol> <li>Navigate to the Chat section</li> <li>Type your question in the input field</li> <li>Press Enter or click Send</li> </ol> <p>The system will:</p> <ol> <li>Search your documents for relevant chunks</li> <li>Use the retrieved context to generate a response</li> <li>Display the answer with source citations</li> </ol>"},{"location":"guide/chat/#tips-for-better-results","title":"Tips for Better Results","text":""},{"location":"guide/chat/#be-specific","title":"Be Specific","text":"<p>Instead of:</p> <p>\"Tell me about the report\"</p> <p>Try:</p> <p>\"What were the Q3 revenue figures mentioned in the financial report?\"</p>"},{"location":"guide/chat/#reference-document-content","title":"Reference Document Content","text":"<p>The AI works best when your questions relate to information actually in your documents.</p>"},{"location":"guide/chat/#follow-up","title":"Follow Up","text":"<p>You can ask follow-up questions to drill deeper into a topic. The chat maintains context within a conversation.</p>"},{"location":"guide/chat/#source-citations","title":"Source Citations","text":"<p>Responses include citations showing which document chunks were used. Click on a citation to view the source text.</p>"},{"location":"guide/chat/#conversation-history","title":"Conversation History","text":"<p>Previous conversations are saved and accessible from the sidebar. You can:</p> <ul> <li>Continue previous conversations</li> <li>Start new conversations</li> <li>Delete old conversations</li> </ul>"},{"location":"guide/uploading/","title":"Uploading Documents","text":""},{"location":"guide/uploading/#supported-formats","title":"Supported Formats","text":"<p>RetrievAI supports the following document types:</p> <ul> <li>PDF (<code>.pdf</code>)</li> <li>Word (<code>.docx</code>)</li> <li>Plain Text (<code>.txt</code>)</li> <li>Markdown (<code>.md</code>)</li> </ul>"},{"location":"guide/uploading/#upload-process","title":"Upload Process","text":"<ol> <li>Navigate to the Documents section</li> <li>Click Upload or drag and drop files</li> <li>Wait for processing to complete</li> </ol>"},{"location":"guide/uploading/#processing-pipeline","title":"Processing Pipeline","text":"<p>When you upload a document, it goes through:</p> <ol> <li>Extraction \u2014 Text is extracted from the document</li> <li>Chunking \u2014 Content is split into semantic chunks</li> <li>Embedding \u2014 Each chunk is converted to a vector embedding</li> <li>Indexing \u2014 Embeddings are stored in ChromaDB for retrieval</li> </ol> <p>Processing Time</p> <p>Large documents may take a few minutes to process. You can monitor progress in the Documents view.</p>"},{"location":"guide/uploading/#document-management","title":"Document Management","text":""},{"location":"guide/uploading/#viewing-documents","title":"Viewing Documents","text":"<p>The Documents page shows all uploaded documents with:</p> <ul> <li>File name and type</li> <li>Upload date</li> <li>Processing status</li> <li>Chunk count</li> </ul>"},{"location":"guide/uploading/#deleting-documents","title":"Deleting Documents","text":"<p>To delete a document:</p> <ol> <li>Select the document</li> <li>Click the delete icon</li> <li>Confirm deletion</li> </ol> <p>Warning</p> <p>Deleting a document removes all associated chunks and embeddings. This cannot be undone.</p>"}]}